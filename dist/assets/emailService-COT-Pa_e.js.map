{"version":3,"file":"emailService-COT-Pa_e.js","sources":["../../src/utils/emailService.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\n// Initialize Supabase client with environment variables\r\nconst supabaseUrl = process.env.VITE_SUPABASE_URL || '';\r\nconst supabaseAnonKey = process.env.VITE_SUPABASE_ANON_KEY || '';\r\nconst supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n\r\ninterface EmailOptions {\r\n  to: string;\r\n  subject: string;\r\n  content: string;\r\n  replyTo?: string;\r\n}\r\n\r\nexport const sendEmail = async ({ to, subject, content, replyTo }: EmailOptions) => {\r\n  try {\r\n    // Using Supabase's built-in email service\r\n    const { error } = await supabase.functions.invoke('send-email', {\r\n      body: {\r\n        to,\r\n        subject,\r\n        content,\r\n        replyTo\r\n      }\r\n    });\r\n\r\n    if (error) {\r\n      throw new Error(`Failed to send email: ${error.message}`);\r\n    }\r\n\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Email sending failed:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const sendPasswordResetEmail = async (to: string, resetLink: string) => {\r\n  const subject = 'Password Reset Request';\r\n  const content = `\r\n    <h2>Password Reset Request</h2>\r\n    <p>You recently requested to reset your password. Click the link below to reset it:</p>\r\n    <p><a href=\"${resetLink}\" style=\"padding: 10px 20px; background-color: #4f46e5; color: white; text-decoration: none; border-radius: 5px;\">Reset Password</a></p>\r\n    <p>If you didn't request this, please ignore this email.</p>\r\n    <p>This link will expire in 1 hour for security purposes.</p>\r\n  `;\r\n\r\n  return sendEmail({ to, subject, content });\r\n};"],"names":["supabaseUrl","define_process_env_default","supabaseAnonKey","supabase","createClient","sendEmail","to","subject","content","replyTo","error","sendPasswordResetEmail","resetLink"],"mappings":"iDAGA,MAAMA,EAAcC,EAAY,mBAAqB,GAC/CC,EAAkBD,EAAY,wBAA0B,GACxDE,EAAWC,EAAaJ,EAAaE,CAAe,EAS7CG,EAAY,MAAO,CAAE,GAAAC,EAAI,QAAAC,EAAS,QAAAC,EAAS,QAAAC,KAA4B,CAClF,GAAI,CAEF,KAAM,CAAE,MAAAC,CAAA,EAAU,MAAMP,EAAS,UAAU,OAAO,aAAc,CAC9D,KAAM,CACJ,GAAAG,EACA,QAAAC,EACA,QAAAC,EACA,QAAAC,CAAA,CACF,CACD,EAED,GAAIC,EACF,MAAM,IAAI,MAAM,yBAAyBA,EAAM,OAAO,EAAE,EAG1D,MAAO,CAAE,QAAS,EAAA,CACpB,OAASA,EAAO,CACd,cAAQ,MAAM,wBAAyBA,CAAK,EACtCA,CACR,CACF,EAEaC,EAAyB,MAAOL,EAAYM,IAAsB,CAC7E,MAAML,EAAU,yBACVC,EAAU;AAAA;AAAA;AAAA,kBAGAI,CAAS;AAAA;AAAA;AAAA,IAKzB,OAAOP,EAAU,CAAE,GAAAC,EAAI,QAAAC,EAAS,QAAAC,EAAS,CAC3C"}